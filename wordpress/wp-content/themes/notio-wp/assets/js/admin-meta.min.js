jQuery(function(d){d(".thb-register:not(.disabled)").on("click",function(e){var s=d(this),a=d("#thb_product_key").val(),t=d("#thb_purchase_code").val(),o=s.hasClass("thb_purchase_code"),n=o?s.data("verify-by-purchase"):s.data("verify"),r={domain:s.data("domain")};return o?r.purchase_code=t:r.product_key=a,d.ajax({method:"GET",url:n,data:r,beforeSend:function(){s.addClass("disabled")},error:function(e){var a;s.removeClass("disabled"),!e.responseText||(a=d.parseJSON(e.responseText)).error_message&&("Invalid product_key"===a.error_message?s.parents(".step").find(".thb_error_messages").html('<div class="thb-error"><p><span class="dashicons dashicons-warning"></span> Invalid Product Key</p><p><small>Please make sure that you are using the exactly the same​ WordPress URL inside Settings > General.</small></p></div>'):"Invalid purchase_code"===a.error_message?s.parents(".step").find(".thb_error_messages").html('<div class="thb-error"><p><span class="dashicons dashicons-warning"></span> Invalid Envato Purchase Code</p><p><small>Please make sure that you are using the correct Envato Purchase Code for this theme.</small></p></div>'):"Invalid domain"===a.error_message?s.parents(".step").find(".thb_error_messages").html('<div class="thb-error"><p><span class="dashicons dashicons-warning"></span> Invalid Domain</p><p><small>Please make sure that you are using the exactly the same​ WordPress URL inside Settings > General.</small></p></div>'):s.parents(".step").find(".thb_error_messages").html('<div class="thb-error"><p><span class="dashicons dashicons-warning"></span> '+a.error_message+"</p></div>"))},success:function(e){e.product_key&&(a=e.product_key),d.ajax(ajaxurl,{method:"POST",data:{action:"thb_update_options",key:a,expired:0,security:s.data("security")},success:function(){location.reload()}})}}),!1}),d(".thb-delete-key").on("click",function(e){var a=d(this);return d.ajax(ajaxurl,{method:"POST",data:{action:"thb_update_options",key:"",expired:0,security:a.data("security")},success:function(){location.reload()}}),!1});var t={popup:d("#thb-adm-popup"),close:d(".thb-popup-close"),btn:d(".import-opts-btn")};t.close.on("click",function(){d(this).closest(t.popup).removeClass("opvis")}),d(document).on("keyup",function(e){27===e.keyCode&&t.popup.hasClass("opvis")&&t.close.trigger("click")}),d(".thb-check-line [type=checkbox]").on("change",function(){var e=d(this);e.toggleClass("thb-checked"),"ty-contents"===e.attr("id")&&(e.hasClass("child-opened")?e.removeClass("child-opened").parent().next().removeClass("done"):e.addClass("child-opened").parent().next().addClass("done"))}),t.btn.on("click",function(){var e=d(this),a=e.data("demo");t.popup.find(".button").data("selected",a),t.popup.find("figure img").attr("src",e.closest(".theme").find("img").attr("src")),t.popup.find("[type=checkbox]"),t.popup.addClass("opvis")});var o=new FormData;"undefined"!=typeof ocdi&&(o.append("action","ocdi_import_demo_data"),o.append("security",ocdi.ajax_nonce)),t.popup.find("form").on("submit",function(e){e.preventDefault();var a=d(this),s=a.find(".button").data("selected");t.popup.find("form").addClass("thb-loading"),a.closest(".thb-popup-box").find(".thb-import-loading").addClass("opvis"),a.children("[type=submit]").addClass("disabled").attr("disabled","disabled").unbind("click"),o.append("selected",s),o.append("thb_import_options",a.serialize()),function s(t){d.ajax({method:"POST",url:ocdi.ajax_url,data:t,contentType:!1,processData:!1}).done(function(e){var a;void 0!==e.status&&"newAJAX"===e.status?s(t):void 0!==e.status&&"afterAllImportAJAX"===e.status?((a=new FormData).append("action","ocdi_after_import_data"),a.append("security",ocdi.ajax_nonce),s(a)):location.reload()})}(o)})});